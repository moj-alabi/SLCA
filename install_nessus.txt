#!/bin/bash

set -e

echo "[+] Downloading Nessus 10.11.0..."
curl --request GET \
  --url 'https://www.tenable.com/downloads/api/v2/pages/nessus/files/Nessus-10.11.0-debian10_amd64.deb' \
  --output 'Nessus-10.11.0-debian10_amd64.deb'

echo "[+] Installing package..."
sudo dpkg -i Nessus-10.11.0-debian10_amd64.deb || sudo apt --fix-broken install -y

echo "[+] Enabling Nessus service..."
sudo systemctl enable nessusd

echo "[+] Starting Nessus service..."
sudo systemctl start nessusd

echo "[+] Nessus installation complete!"
echo "[+] Access the web interface at: https://<your-ip>:8834/"
